<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>lab 8</title>
    <link rel="stylesheet" type="text/css" href="lab8.css" />
</head>

<body>
    <div class="Blocks">
        <input type="text" id="FirstInput0">
        <input type="text" id="SecondInput0">
        <button id="FirstUp0" onclick="Up(0)"> U </button>
        <button id="FirstDown0" onclick="Down(0)"> D </button>
        <button id="0" onclick="Delete(0)"> x </button> </br>
    </div>
    <button class="Add" onclick="Add()"> Добавить элемент </button> </br>
    <button class="Save" onclick="Save()"> Сохранить </button>

    <script>
        var FirstIn = "FirstInput";
        var SecondIn = "SecondInput";
        var Del = "Delete";
        var i = 0;
        var Count = 1;
        function Save() {

            var TextOutput = document.createElement('div');
            console.log(i);
            var FoundNextId = 0;
            while (document.getElementById(FoundNextId) == undefined) {
                console.log(FoundNextId);
                FoundNextId += 1;
            }
            var Text1 = document.getElementById(FirstIn + FoundNextId).value;
            var Text2 = document.getElementById(SecondIn + FoundNextId).value;
            TextOutput.innerHTML += ('{' + '"' + Text1 + '"' + ":");
            TextOutput.innerHTML += ('"' + Text2 + '"');

            ++FoundNextId;
            for (var j = 1; j < Count; j++) {
                console.log("!!!");
                console.log(Count);
                while ((document.getElementById(FoundNextId) == undefined) && (FoundNextId < 20)) {
                    ++FoundNextId;
                    console.log(FoundNextId);
                }

                var Text1 = document.getElementById(FirstIn + FoundNextId).value;
                var Text2 = document.getElementById(SecondIn + FoundNextId).value;
                TextOutput.innerHTML += ("," + '"' + Text1 + '"' + ":");
                TextOutput.innerHTML += ('"' + Text2 + '"');
                ++FoundNextId;
                console.log(FoundNextId);
            }
            TextOutput.innerHTML += ("}");
            document.body.append(TextOutput);
            FoundNextId = 0;
        }

        function Delete(deleteid) {
            --Count;
            document.getElementById(deleteid).remove();
            document.getElementById(FirstIn + deleteid).remove();
            document.getElementById(SecondIn + deleteid).remove();
        }

        function Add() {
            i += 1;
            ++Count;
            console.log(Count);
            var FirstInputAdd = document.createElement('input');
            FirstInputAdd.className = 'Blocks';
            FirstInputAdd.id = FirstIn + i;
            var SecondInputAdd = document.createElement('input');
            SecondInputAdd.className = 'Blocks';
            SecondInputAdd.id = SecondIn + i;
            var Blocks = document.getElementsByClassName('Blocks')[0];
            Blocks.append(FirstInputAdd);
            Blocks.append(SecondInputAdd);

            var DeleteAdd = document.createElement('button');
            DeleteAdd.id = i;
            DeleteAdd.className = 'Blocks';
            //DeleteAdd.innerHTML = i;
            DeleteAdd.innerHTML = "x";
            DeleteAdd.onclick = function () {
                Delete(DeleteAdd.id);
            }

            Blocks.append(DeleteAdd);  //new text
        }
    </script>
</body>

</html>